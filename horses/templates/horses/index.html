{% extends "horses/layout.html" %}
{% load static %}


{% block body %}

{% if user.is_authenticated %}
    <div id="indexuser" class="container">
      <h1 class=" rounded display-6" style="text-align:center; padding-top:40px; padding-bottom:40px;"> Mes rendez-vous et dates importantes des quatorzes prochains jours </h1>
      <br>
      <div class="row" style="padding-top: 40px">
        <div id="agenda" class="col-lg-6 col-md-5" style="text-align:center; padding-right:20px; ">
            <h2 class="display-6">Agenda</h2>
            <div id="todonext" class="cont4" style="padding-bottom:50px">
                <div class="accordion accordion-flush" id="accordionFlushExample">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingOne">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                        üïî Rendez-vous 
                      </button>
                    </h2>
                    <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                      <div class="accordion-body">
                        {% if not dates %}
                          <li class="list-group-item">Aucun rendez-vous pr√©vu dans les 2 prochaines semaines.</li>
                        {% else %}
                          {% for date in dates %}
                            <a href="{% url 'horse' date.horse.id %}" class="list-group-item list-group-item-action">{{date.date}} pour {{date.horse.name}} (Raison : {{date.reason}})</a>
                          {% endfor %}
                        {% endif %}
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingTwo">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                        üèÜ Concours 
                      </button>
                    </h2>
                    <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
                      <div class="accordion-body">
                        {% if not contests %}
                      <li class="list-group-item">Aucun concours pr√©vu dans les deux prochaines semaines.</li>
                      {% else %}
                      {% for contest in contests %}
                        <a href="{% url 'horse' contest.horse.id %}" class="list-group-item list-group-item-action"> Le {{contest.date}} avec {{contest.horse.name}} √† {{contest.place}}</a>
                        {% endfor %}
                      {% endif %}
                      </div>
                    </div>
                  </div>
                
                </div> 
                  <div style="padding-top:100px"></div>
                <br>
                
                <h2 class="display-6" >Elevage</h2>
                <div class=" rounded cont4">
                <div class="accordion accordion-flush" id="accordionFlushExample3" >
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingFour">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseFour" aria-expanded="false" aria-controls="flush-collapseFour">
                        ‚≠ê Gestations √† venir
                      </button>
                    </h2>
                    <div id="flush-collapseFour" class="accordion-collapse collapse" aria-labelledby="flush-headingFour" data-bs-parent="#accordionFlushExample3">
                      <div class="accordion-body">
                        {% if not gestations %}
                      <li class="list-group-item">Aucune gestation de pr√©vue cette ann√©e.</li>
                      {% else %}
                      {% for gestation in gestations %}
                        <a href="{% url 'horse' gestation.horse.id %}" class="list-group-item list-group-item-action">{{gestation.horse.name}}: {{gestation.datestart}} - {{gestation.dateend}}</a>
                        {% endfor %}
                      {% endif %}
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingFive">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseFive" aria-expanded="false" aria-controls="flush-collapseFive">
                        üíû Saillies (Etalons)
                      </button>
                    </h2>
                    <div id="flush-collapseFive" class="accordion-collapse collapse" aria-labelledby="flush-headingFive" data-bs-parent="#accordionFlushExample3">
                      <div class="accordion-body">
                        {% if not breeds %}
                          <li class="list-group-item">Aucune saillie pr√©vue dans les 2 prochaines semaines.</li>
                        {% else %}
                          {% for breed in breeds %}
                            <a href="{% url 'horse' breed.horse.id %}" class="list-group-item list-group-item-action">{{breed.date}} : {{breed.horse.name}} x {{breed.mare}}</a>
                          {% endfor %}
                        {% endif %}
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingSix">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseSix" aria-expanded="false" aria-controls="flush-collapseSix">
                        üíû Saillies (Juments)
                      </button>
                    </h2>
                    <div id="flush-collapseSix" class="accordion-collapse collapse" aria-labelledby="flush-headingSix" data-bs-parent="#accordionFlushExample3">
                      <div class="accordion-body">
                        {% if not mbreds %}
                          <li class="list-group-item">Aucune saillie pr√©vue dans les 2 prochaines semaines.</li>
                        {% else %}
                          {% for mbred in mbreds %}
                            <a href="{% url 'horse' mbred.horse.id %}" class="list-group-item list-group-item-action">{{mbred.date}} : {{mbred.horse.name}} x {{mbred.stallion}}</a>
                          {% endfor %}
                        {% endif %}
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingTwelve">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                        üî• Chaleurs 
                      </button>
                    </h2>
                    <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlushExample3">
                      <div class="accordion-body">
                        {% if not heats %}
                          <li class="list-group-item">Aucunes chaleurs pr√©vue dans les 2 prochaines semaines.</li>
                        {% else %}
                          {% for heat in heats %}
                            <a href="{% url 'horse' heat.horse.id %}" class="list-group-item list-group-item-action">{{heat.horse.name}}: {{heat.datestart}}</a>
                          {% endfor %}
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div> 
              </div> 
            </div>
        </div>
        
        <div id="rappels" class="col-lg-6 col-md-5" style="text-align:center; padding-left:20px">
            <h2 class="display-6">Rappels sant√©</h2>
            <div id="rapps" class="cont4">
              <div class="accordion accordion-flush" id="accordionFlushExample2">
                <div class="accordion-item">
                  <h2 class="accordion-header" id="flush-headingSeven">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseSeven" aria-expanded="false" aria-controls="flush-collapseSeven">
                      üíâ Vaccins
                    </button>
                  </h2>
                  <div id="flush-collapseSeven" class="accordion-collapse collapse" aria-labelledby="flush-headingSeven" data-bs-parent="#accordionFlushExample2">
                    <div class="accordion-body">
                      {% if not vaccins %}
                      <li class="list-group-item">Aucun vaccin pr√©vu dans les 2 prochaines semaines.</li>
                      {% else %}
                      {% for vaccin in vaccins %}
                        <a href="{% url 'horse' vaccin.horse.id %}" class="list-group-item list-group-item-action">{{vaccin.datetmp}}: {{vaccin.horse.name}} ({{vaccin.kind}})</a>
                        {% endfor %}
                        {% endif %}
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header" id="flush-headingEight">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEight" aria-expanded="false" aria-controls="flush-collapseEight">
                      üêé Mar√©chalerie
                    </button>
                  </h2>
                  <div id="flush-collapseEight" class="accordion-collapse collapse" aria-labelledby="flush-headingEight" data-bs-parent="#accordionFlushExample2">
                    <div class="accordion-body">
                      <div class="list-group">
                        {% for farr in farrs %}
                        <a href="{% url 'horse' farr.horse.id %}" class="list-group-item list-group-item-action">{{farr.date}} : {{farr.horse.name}}</a>
                        {% endfor %}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header" id="flush-headingNine">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                      ü¶ë Vermifuges
                    </button>
                  </h2>
                  <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlushExample2">
                    <div class="accordion-body">
                      <div class="list-group">
                        {% if not dewormers%}
                          <li class="list-group-item">Aucune vermifugation pr√©vue dans les 2 prochaines semaines.</li>
                        {% else %}
                          {% for dewormer in dewormers %}
                            <a href="{% url 'horse' dewormer.horse.id %}" class="list-group-item list-group-item-action">{{dewormer.datetmp}}: {{dewormer.horse.name}}</a>
                          {% endfor %}
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header" id="flush-headingTen">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTen" aria-expanded="false" aria-controls="flush-collapseTen">
                      üíÄ Ost√©opathie
                    </button>
                  </h2>
                  <div id="flush-collapseTen" class="accordion-collapse collapse" aria-labelledby="flush-headingTen" data-bs-parent="#accordionFlushExample2">
                    <div class="accordion-body">
                      {% if not osteos %}
                        <li class="list-group-item">Aucun rendez-vous d'osth√©opathie pr√©vu dans les deux prochaines semaines.</li>
                      {% else %}
                        {% for osteo in osteos %}
                          <a href="{% url 'horse' osteo.horse.id %}" class="list-group-item list-group-item-action">{{osteo.date}}: {{osteo.horse.name}}</a>
                        {% endfor %}
                      {% endif %}
                    </div>
                  </div>
                </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingEleven">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                    üç¨ Dentisterie
                  </button>
                </h2>
                <div id="flush-collapseEleven" class="accordion-collapse collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlushExample2">
                  <div class="accordion-body">
                    {% if not dents %}
                      <li class="list-group-item">Aucun rendez-vous de dentisterie pr√©vu dans les deux prochaines semaines.</li>
                    {% else %}
                      {% for dent in dents %}
                        <a href="{% url 'horse' dent.horse.id %}" class="list-group-item list-group-item-action">{{dent.date}}: {{dent.horse.name}}</a>
                      {% endfor %}
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
        </div>
      </div>
        
    </div>
{% else %}

    <div>
        Connectez vous √† votre compte pour utiliser Equiplan! 
        <a  href="{% url 'login' %}">Se connecter</a> 
    </div>

{% endif %}

{% endblock%}



{% block script %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    

{% endblock %}